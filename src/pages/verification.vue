<template>
  <div id="eodiro-verification" />
</template>

<script>
import Axios from 'axios'
import apiUrl from '~/modules/api-url'

export default {
  mounted() {
    const token = this.$route.query.token
    if (!token) {
      location.replace('/')
    }

    // TODO: replace with authApi module
    Axios({
      ...apiUrl.user.verify,
      data: {
        token,
      },
    })
      .then(() => {
        // Verify success
        alert('ğŸ‰ ì¸ì¦ë˜ì—ˆìŠµë‹ˆë‹¤!')
        this.$router.replace(this.localePath('sign-in'))
      })
      .catch(() => {
        alert('ì´ë¯¸ ì¸ì¦ë˜ì—ˆê±°ë‚˜ ë§Œë£Œëœ ì¸ì¦ ì½”ë“œì…ë‹ˆë‹¤.')
        this.$router.replace(this.localePath('sign-up'))
      })
  },
}
</script>
